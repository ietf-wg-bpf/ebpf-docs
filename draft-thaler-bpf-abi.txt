



Network Working Group                                     D. Thaler, Ed.
Internet-Draft                                                 Microsoft
Intended status: Standards Track                         26 January 2024
Expires: 29 July 2024


          BPF ABI Recommended Conventions and Guidelines v1.0
                        draft-thaler-bpf-abi-00

Abstract

   This is version 1.0 of an informational document containing
   recommended conventions and guidelines for producing portable BPF
   program binaries.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 29 July 2024.

Copyright Notice

   Copyright (c) 2024 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.






Thaler                    Expires 29 July 2024                  [Page 1]

Internet-Draft                  eBPF ABI                    January 2024


Table of Contents

   1.  Registers and calling convention  . . . . . . . . . . . . . .   2
   2.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   2
   3.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   2
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   2

1.  Registers and calling convention

   BPF has 10 general purpose registers and a read-only frame pointer
   register, all of which are 64-bits wide.

   The BPF calling convention is defined as:

   *  R0: return value from function calls, and exit value for BPF
      programs

   *  R1 - R5: arguments for function calls

   *  R6 - R9: callee saved registers that function calls will preserve

   *  R10: read-only frame pointer to access stack

   R0 - R5 are scratch registers and BPF programs needs to spill/fill
   them if necessary across calls.

2.  IANA Considerations

   This document has no actions for IANA.

3.  Acknowledgements

   This draft was generated from abi.rst in the Linux kernel repository,
   to which other individuals have authored contributions over time,
   including Alexei Starovoitov, Christoph Hellwig, and David Vernet.

Author's Address

   Dave Thaler (editor)
   Microsoft
   Redmond, WA 98052
   United States of America
   Email: dthaler@microsoft.com








Thaler                    Expires 29 July 2024                  [Page 2]
